<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026 Health Plan Cost Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f6;
        }
        .plan-card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease-in-out;
        }
        .plan-card:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .best-badge {
            display: none; /* Hidden by default */
            background-color: #d1fae5;
            color: #065f46;
            font-size: 0.875rem;
            font-weight: 600;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            border: 1px solid #6ee7b7;
        }
        .best-value .best-badge {
            display: inline-block; /* Show when 'best-value' class is added */
        }
        .best-value {
            border: 2px solid #10b981;
            box-shadow: 0 10px 15px -3px rgba(16, 185, 129, 0.2), 0 4px 6px -2px rgba(16, 185, 129, 0.1);
        }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type="number"] {
            -moz-appearance: textfield;
        }
        input:disabled {
            background-color: #f3f4f6;
            cursor: not-allowed;
        }
        .person-input-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .person-input {
            flex-grow: 1;
        }
        .remove-btn {
            background-color: #fee2e2;
            color: #b91c1c;
            border: none;
            border-radius: 9999px;
            width: 1.75rem;
            height: 1.75rem;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.2s;
        }
        .remove-btn:hover {
            background-color: #fecaca;
        }
        .add-btn {
            background-color: #dbeafe;
            color: #1e40af;
            font-size: 0.875rem;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.375rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .add-btn:hover {
            background-color: #bfdbfe;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <div class="max-w-6xl mx-auto">
        
        <header class="mb-8 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">2026 Health Plan Cost Calculator</h1>
            <p class="text-lg text-gray-600 mt-2">Compare your total costs for all 2026 health plans.</p>
        </header>

        <!-- Input Card -->
        <div class="plan-card p-6 mb-8">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Column 1: Coverage Level -->
                <div>
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">1. Select Coverage & Add People</h2>
                    <label for="coverage-level" class="block text-sm font-medium text-gray-700">Coverage Level</label>
                    <select id="coverage-level" class="mt-1 block w-full rounded-md border-gray-300 py-2 pl-3 pr-10 text-base focus:border-blue-500 focus:outline-none focus:ring-blue-500 sm:text-sm">
                        <option value="employeeOnly">Employee Only</option>
                        <option value="employeeSpouse">Employee + Spouse</option>
                        <option value="employeeChildren">Employee + Child(ren)</option>
                        <option value="family">Family</option>
                    </select>
                    <p class="text-xs text-gray-500 mt-2">Selecting a new level will reset expense inputs.</p>
                </div>

                <!-- Column 2: Expense Inputs -->
                <div>
                    <h2 class="text-xl font-semibold text-gray-700 mb-4">2. Enter Medical Costs</h2>
                    <p class="text-sm text-gray-600 mb-4">Enter each person's total estimated *in-network* costs for the year.</p>
                    <div id="expense-inputs-container" class="space-y-4">
                        <!-- Dynamic inputs will be added here -->
                    </div>
                </div>
            </div>

             <div class="mt-8 border-t pt-6 text-right">
                <button id="calculate-btn" class="w-full md:w-auto bg-blue-600 text-white font-semibold py-2 px-6 rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                    Calculate Total Costs
                </button>
            </div>
        </div>

        <!-- Results Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6" id="results-grid">

            <!-- PPO Plan Card -->
            <div class="plan-card p-6" id="ppo-card">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-blue-700">PPO Plan</h3>
                    <span class="best-badge" id="ppo-badge">Best Value</span>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <div class="text-gray-500 text-sm">Total Annual Premium</div>
                        <div class="text-xl font-semibold text-gray-800" id="ppo-premium">$0.00</div>
                    </div>
                    <div>
                        <div class="text-gray-500 text-sm">Your Medical OOP Cost</div>
                        <div class="text-xl font-semibold text-gray-800" id="ppo-oop-cost">$0.00</div>
                    </div>
                    <div>
                        <div class="text-gray-500 text-sm">Company HSA Contribution</div>
                        <div class="text-xl font-semibold text-gray-800" id="ppo-hsa">($0.00)</div>
                    </div>
                    <hr class="my-4">
                    <div>
                        <div class="text-gray-600 text-lg font-semibold">Final Annual Cost</div>
                        <div class="text-3xl font-bold text-blue-800" id="ppo-final-cost">$0.00</div>
                    </div>
                </div>

                <div class="mt-6 pt-4 border-t border-gray-200">
                    <h4 class="font-semibold text-gray-700 mb-2">Plan Details (In-Network)</h4>
                    <ul class="text-sm text-gray-600 space-y-1" id="ppo-details-list">
                        <!-- Details will be populated by JS -->
                    </ul>
                </div>
            </div>

            <!-- HDHP Lower Deductible Card -->
            <div class="plan-card p-6" id="hdhp-lower-card">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-teal-700">HDHP - Lower Deductible</h3>
                    <span class="best-badge" id="hdhp-lower-badge">Best Value</span>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <div class="text-gray-500 text-sm">Total Annual Premium</div>
                        <div class="text-xl font-semibold text-gray-800" id="hdhp-lower-premium">$0.00</div>
                    </div>
                    <div>
                        <div class="text-gray-500 text-sm">Your Medical OOP Cost</div>
                        <div class="text-xl font-semibold text-gray-800" id="hdhp-lower-oop-cost">$0.00</div>
                    </div>
                    <div>
                        <div class="text-gray-500 text-sm">Company HSA Contribution</div>
                        <div class="text-xl font-semibold text-green-600" id="hdhp-lower-hsa">($0.00)</div>
                    </div>
                    <hr class="my-4">
                    <div>
                        <div class="text-gray-600 text-lg font-semibold">Final Annual Cost</div>
                        <div class="text-3xl font-bold text-teal-800" id="hdhp-lower-final-cost">$0.00</div>
                    </div>
                </div>

                <div class="mt-6 pt-4 border-t border-gray-200">
                    <h4 class="font-semibold text-gray-700 mb-2">Plan Details (In-Network)</h4>
                    <ul class="text-sm text-gray-600 space-y-1" id="hdhp-lower-details-list">
                        <!-- Details will be populated by JS -->
                    </ul>
                </div>
            </div>

            <!-- HDHP Higher Deductible Card -->
            <div class="plan-card p-6" id="hdhp-higher-card">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-2xl font-bold text-purple-700">HDHP - Higher Deductible</h3>
                    <span class="best-badge" id="hdhp-higher-badge">Best Value</span>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <div class="text-gray-500 text-sm">Total Annual Premium</div>
                        <div class="text-xl font-semibold text-gray-800" id="hdhp-higher-premium">$0.00</div>
                    </div>
                    <div>
                        <div class="text-gray-500 text-sm">Your Medical OOP Cost</div>
                        <div class="text-xl font-semibold text-gray-800" id="hdhp-higher-oop-cost">$0.00</div>
                    </div>
                    <div>
                        <div class="text-gray-500 text-sm">Company HSA Contribution</div>
                        <div class="text-xl font-semibold text-green-600" id="hdhp-higher-hsa">($0.00)</div>
                    </div>
                    <hr class="my-4">
                    <div>
                        <div class="text-gray-600 text-lg font-semibold">Final Annual Cost</div>
                        <div class="text-3xl font-bold text-purple-800" id="hdhp-higher-final-cost">$0.00</div>
                    </div>
                </div>

                <div class="mt-6 pt-4 border-t border-gray-200">
                    <h4 class="font-semibold text-gray-700 mb-2">Plan Details (In-Network)</h4>
                    <ul class="text-sm text-gray-600 space-y-1" id="hdhp-higher-details-list">
                        <!-- Details will be populated by JS -->
                    </ul>
                </div>
            </div>

        </div>

        <!-- Disclaimer -->
        <div class="mt-8 text-sm text-gray-500">
            <p><strong>Disclaimer:</strong> This calculator is for estimation purposes only and is based on the 2026 benefits guide. Calculations assume in-network services and do not account for copays (like those on the PPO plan for office visits, which would be in addition to these costs). The logic for the PPO plan assumes all expenses are subject to deductible and coinsurance, which simplifies the calculation. Please review all plan documents for exact coverage details.</p>
        </div>
    </div>

    <script>
        // --- Plan Data (from 2026 Guide, pg 10 & 12) ---
        const planData = {
            employeeSpouse: {
                ppo: {
                    annualPremium: 320.60 * 26,
                    hsaContribution: 0,
                    type: 'non-aggregating',
                    indDeductible: 850,
                    famDeductible: 1700,
                    indOopMax: 3600,
                    famOopMax: 7200,
                    coinsuranceRate: 0.20 // You pay 20%
                },
                hdhpLower: {
                    annualPremium: 185.96 * 26,
                    hsaContribution: 1500,
                    type: 'aggregating',
                    indDeductible: 2300, 
                    famDeductible: 4600,
                    indOopMax: 4000, 
                    famOopMax: 8000,
                    coinsuranceRate: 0.20 // You pay 20%
                },
                hdhpHigher: {
                    annualPremium: 92.34 * 26,
                    hsaContribution: 1500,
                    type: 'non-aggregating',
                    indDeductible: 6000,
                    famDeductible: 12000,
                    indOopMax: 6000,
                    famOopMax: 12000,
                    coinsuranceRate: 0.00 // You pay 0%
                }
            },
            employeeChildren: {
                ppo: {
                    annualPremium: 288.23 * 26,
                    hsaContribution: 0,
                    type: 'non-aggregating',
                    indDeductible: 850,
                    famDeductible: 1700,
                    indOopMax: 3600,
                    famOopMax: 7200,
                    coinsuranceRate: 0.20
                },
                hdhpLower: {
                    annualPremium: 168.72 * 26,
                    hsaContribution: 1500,
                    type: 'aggregating',
                    indDeductible: 2300,
                    famDeductible: 4600,
                    indOopMax: 4000,
                    famOopMax: 8000,
                    coinsuranceRate: 0.20
                },
                hdhpHigher: {
                    annualPremium: 83.00 * 26,
                    hsaContribution: 1500,
                    type: 'non-aggregating',
                    indDeductible: 6000,
                    famDeductible: 12000,
                    indOopMax: 6000,
                    famOopMax: 12000,
                    coinsuranceRate: 0.00
                }
            },
            family: {
                ppo: {
                    annualPremium: 450.09 * 26,
                    hsaContribution: 0,
                    type: 'non-aggregating',
                    indDeductible: 850,
                    famDeductible: 1700,
                    indOopMax: 3600,
                    famOopMax: 7200,
                    coinsuranceRate: 0.20
                },
                hdhpLower: {
                    annualPremium: 254.75 * 26,
                    hsaContribution: 1500,
                    type: 'aggregating',
                    indDeductible: 2300,
                    famDeductible: 4600,
                    indOopMax: 4000,
                    famOopMax: 8000,
                    coinsuranceRate: 0.20
                },
                hdhpHigher: {
                    annualPremium: 129.62 * 26,
                    hsaContribution: 1500,
                    type: 'non-aggregating',
                    indDeductible: 6000,
                    famDeductible: 12000,
                    indOopMax: 6000,
                    famOopMax: 12000,
                    coinsuranceRate: 0.00
                }
            },
            employeeOnly: {
                ppo: {
                    annualPremium: 124.97 * 26,
                    hsaContribution: 0,
                    type: 'individual',
                    indDeductible: 850,
                    indOopMax: 3600,
                    coinsuranceRate: 0.20
                },
                hdhpLower: {
                    annualPremium: 74.10 * 26,
                    hsaContribution: 750,
                    type: 'individual',
                    indDeductible: 2300,
                    indOopMax: 4000,
                    coinsuranceRate: 0.20
                },
                hdhpHigher: {
                    annualPremium: 40.69 * 26,
                    hsaContribution: 750,
                    type: 'individual',
                    indDeductible: 6000,
                    indOopMax: 6000,
                    coinsuranceRate: 0.00
                }
            }
        };

        // --- Helper Functions ---
        const formatCurrency = (num) => `$${num.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')}`;
        const formatCurrencyNegative = (num) => `($${num.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')})`;

        /**
         * Calculates OOP cost for a single person.
         */
        function calculatePersonOop(expense, indDeductible, indOopMax, coinsuranceRate) {
            const afterDeductible = Math.max(0, expense - indDeductible);
            const deductiblePaid = Math.min(expense, indDeductible);
            const coinsurancePaid = afterDeductible * coinsuranceRate;
            const totalPersonCost = deductiblePaid + coinsurancePaid;
            return Math.min(totalPersonCost, indOopMax);
        }

        /**
         * Calculates OOP for NON-AGGREGATING plans (PPO, HDHP-Higher)
         */
        function calculateNonAggregating(expenses, plan) {
            const totalOop = expenses
                .map(e => calculatePersonOop(e, plan.indDeductible, plan.indOopMax, plan.coinsuranceRate))
                .reduce((a, b) => a + b, 0);
            return Math.min(totalOop, plan.famOopMax);
        }

        /**
         * Calculates OOP for AGGREGATING plans (HDHP-Lower)
         */
        function calculateAggregating(expenses, plan) {
            const totalExpense = expenses.reduce((a, b) => a + b, 0);
            const afterDeductible = Math.max(0, totalExpense - plan.famDeductible);
            const deductiblePaid = Math.min(totalExpense, plan.famDeductible);
            const coinsurancePaid = afterDeductible * plan.coinsuranceRate;
            const totalOop = deductiblePaid + coinsurancePaid;
            return Math.min(totalOop, plan.famOopMax);
        }
        
        /**
         * Updates the "Plan Details" section in each card.
         */
        function updatePlanDetailsDOM(level) {
            const plans = planData[level];
            
            // PPO
            document.getElementById('ppo-details-list').innerHTML = `
                <li><strong>Deductible Type:</strong> ${plans.ppo.type === 'non-aggregating' ? 'Non-Aggregating' : 'Individual'}</li>
                <li><strong>Deductible:</strong> ${formatCurrency(plans.ppo.indDeductible)} (Ind) ${plans.ppo.famDeductible ? `/ ${formatCurrency(plans.ppo.famDeductible)} (Fam)` : ''}</li>
                <li><strong>OOP Max:</strong> ${formatCurrency(plans.ppo.indOopMax)} (Ind) ${plans.ppo.famOopMax ? `/ ${formatCurrency(plans.ppo.famOopMax)} (Fam)` : ''}</li>
                <li><strong>Coinsurance:</strong> ${plans.ppo.coinsuranceRate * 100}% (You pay)</li>
            `;
            
            // HDHP Lower
            let hdhpLowerDed, hdhpLowerOop;
            if (level === 'employeeOnly') {
                hdhpLowerDed = `${formatCurrency(plans.hdhpLower.indDeductible)} (Individual)`;
                hdhpLowerOop = `${formatCurrency(plans.hdhpLower.indOopMax)} (Individual)`;
            } else {
                hdhpLowerDed = `${formatCurrency(plans.hdhpLower.famDeductible)} (Family)`;
                hdhpLowerOop = `${formatCurrency(plans.hdhpLower.famOopMax)} (Family)`;
            }
            
            document.getElementById('hdhp-lower-details-list').innerHTML = `
                <li><strong>Deductible Type:</strong> ${plans.hdhpLower.type === 'aggregating' ? '<span class="font-bold">Aggregating</span>' : 'Individual'}</li>
                <li><strong>Deductible:</strong> ${hdhpLowerDed}</li>
                <li><strong>OOP Max:</strong> ${hdhpLowerOop}</li>
                <li><strong>Coinsurance:</strong> ${plans.hdhpLower.coinsuranceRate * 100}% (You pay)</li>
            `;

            // HDHP Higher
            document.getElementById('hdhp-higher-details-list').innerHTML = `
                <li><strong>Deductible Type:</strong> ${plans.hdhpHigher.type === 'non-aggregating' ? 'Non-Aggregating' : 'Individual'}</li>
                <li><strong>Deductible:</strong> ${formatCurrency(plans.hdhpHigher.indDeductible)} (Ind) ${plans.hdhpHigher.famDeductible ? `/ ${formatCurrency(plans.hdhpHigher.famDeductible)} (Fam)` : ''}</li>
                <li><strong>OOP Max:</strong> ${formatCurrency(plans.hdhpHigher.indOopMax)} (Ind) ${plans.hdhpHigher.famOopMax ? `/ ${formatCurrency(plans.hdhpHigher.famOopMax)} (Fam)` : ''}</li>
                <li><strong>Coinsurance:</strong> <span class="font-bold">${plans.hdhpHigher.coinsuranceRate * 100}% (You pay)</span></li>
            `;
        }

        /**
         * Main calculation function.
         */
        function calculateTotalCosts() {
            const level = document.getElementById('coverage-level').value;
            const plans = planData[level];
            
            const expenses = [];
            document.querySelectorAll('.person-expense-input').forEach(input => {
                expenses.push(parseFloat(input.value) || 0);
            });
            
            let oopPPO, oopHdhpLower, oopHdhpHigher;
            
            if (level === 'employeeOnly') {
                const expense1 = expenses[0] || 0;
                oopPPO = calculatePersonOop(expense1, plans.ppo.indDeductible, plans.ppo.indOopMax, plans.ppo.coinsuranceRate);
                oopHdhpLower = calculatePersonOop(expense1, plans.hdhpLower.indDeductible, plans.hdhpLower.indOopMax, plans.hdhpLower.coinsuranceRate);
                oopHdhpHigher = calculatePersonOop(expense1, plans.hdhpHigher.indDeductible, plans.hdhpHigher.indOopMax, plans.hdhpHigher.coinsuranceRate);
            } else { 
                oopPPO = calculateNonAggregating(expenses, plans.ppo);
                oopHdhpLower = calculateAggregating(expenses, plans.hdhpLower);
                oopHdhpHigher = calculateNonAggregating(expenses, plans.hdhpHigher);
            }
            
            // --- Calculate Final Costs ---
            const finalPPO = plans.ppo.annualPremium + oopPPO - plans.ppo.hsaContribution;
            const finalHdhpLower = plans.hdhpLower.annualPremium + oopHdhpLower - plans.hdhpLower.hsaContribution;
            const finalHdhpHigher = plans.hdhpHigher.annualPremium + oopHdhpHigher - plans.hdhpHigher.hsaContribution;

            // --- Update DOM ---
            // Premiums & HSA
            document.getElementById('ppo-premium').textContent = formatCurrency(plans.ppo.annualPremium);
            document.getElementById('ppo-hsa').textContent = formatCurrencyNegative(plans.ppo.hsaContribution);
            
            document.getElementById('hdhp-lower-premium').textContent = formatCurrency(plans.hdhpLower.annualPremium);
            document.getElementById('hdhp-lower-hsa').textContent = formatCurrencyNegative(plans.hdhpLower.hsaContribution);

            document.getElementById('hdhp-higher-premium').textContent = formatCurrency(plans.hdhpHigher.annualPremium);
            document.getElementById('hdhp-higher-hsa').textContent = formatCurrencyNegative(plans.hdhpHigher.hsaContribution);
            
            // OOP Costs
            document.getElementById('ppo-oop-cost').textContent = formatCurrency(oopPPO);
            document.getElementById('hdhp-lower-oop-cost').textContent = formatCurrency(oopHdhpLower);
            document.getElementById('hdhp-higher-oop-cost').textContent = formatCurrency(oopHdhpHigher);

            // Final Costs
            document.getElementById('ppo-final-cost').textContent = formatCurrency(finalPPO);
            document.getElementById('hdhp-lower-final-cost').textContent = formatCurrency(finalHdhpLower);
            document.getElementById('hdhp-higher-final-cost').textContent = formatCurrency(finalHdhpHigher);
            
            // --- Find and Highlight Best Value ---
            document.getElementById('ppo-card').classList.remove('best-value');
            document.getElementById('hdhp-lower-card').classList.remove('best-value');
            document.getElementById('hdhp-higher-card').classList.remove('best-value');

            const minCost = Math.min(finalPPO, finalHdhpLower, finalHdhpHigher);
            
            if (minCost === finalPPO) {
                 document.getElementById('ppo-card').classList.add('best-value');
            }
            if (minCost === finalHdhpLower) {
                 document.getElementById('hdhp-lower-card').classList.add('best-value');
            }
            if (minCost === finalHdhpHigher) {
                 document.getElementById('hdhp-higher-card').classList.add('best-value');
            }
        }
        
        const inputsContainer = document.getElementById('expense-inputs-container');
        let personCount = 0;

        function createPersonInput(label, isRemovable = false) {
            personCount++;
            const inputId = `person-${personCount}`;
            
            const group = document.createElement('div');
            group.className = 'person-input-group';

            let inputHTML = `
                <label for="${inputId}" class="block text-sm font-medium text-gray-700 w-24">${label}</label>
                <div class="mt-1 relative rounded-md shadow-sm person-input">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <span class="text-gray-500 sm:text-sm">$</span>
                    </div>
                    <input type="number" id="${inputId}" class="person-expense-input block w-full rounded-md border-gray-300 pl-7 pr-3 py-2 focus:ring-blue-500 focus:border-blue-500" placeholder="0">
                </div>
            `;
            
            if (isRemovable) {
                const removeBtn = document.createElement('button');
                removeBtn.className = 'remove-btn';
                removeBtn.innerHTML = '&times;';
                removeBtn.onclick = () => {
                    group.remove();
                    calculateTotalCosts(); // Recalculate on remove
                };
                group.innerHTML = inputHTML;
                group.appendChild(removeBtn);
            } else {
                group.innerHTML = inputHTML;
            }
            
            inputsContainer.appendChild(group);

            // Add listener to recalculate on input change
            document.getElementById(inputId).addEventListener('input', calculateTotalCosts);
        }

        function createAddPersonButton() {
            const btn = document.createElement('button');
            btn.id = 'add-person-btn';
            btn.className = 'add-btn mt-2';
            btn.textContent = 'Add Person';
            btn.onclick = () => {
                const label = `Person ${personCount + 1}`;
                createPersonInput(label, true);
            };
            inputsContainer.appendChild(btn);
        }

        /**
         * Handles changes to the coverage level dropdown.
         */
        function handleLevelChange() {
            const level = document.getElementById('coverage-level').value;
            inputsContainer.innerHTML = ''; // Clear all inputs
            personCount = 0;
            
            createPersonInput('You', false); // Always add Employee

            if (level === 'employeeSpouse') {
                createPersonInput('Spouse', false);
            } else if (level === 'employeeChildren') {
                createPersonInput('Child 1', true);
                createAddPersonButton(); // Add button for more children
            } else if (level === 'family') {
                createPersonInput('Spouse', false);
                createPersonInput('Child 1', true);
                createAddPersonButton(); // Add button for more people
            }
            
            // Update plan details display
            updatePlanDetailsDOM(level);
            // Recalculate
            calculateTotalCosts();
        }

        // --- Initial DOM Setup & Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            // Add listeners
            document.getElementById('calculate-btn').addEventListener('click', calculateTotalCosts);
            document.getElementById('coverage-level').addEventListener('change', handleLevelChange);
            
            // Initial setup on load (default to "Employee Only")
            document.getElementById('coverage-level').value = 'employeeOnly';
            handleLevelChange();
        });

    </script>
</body>
</html>

